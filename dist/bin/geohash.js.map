{"version":3,"sources":["bin/geohash.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;AAExB,MAAM,GAAiB,kCAAkC,CAAC;AAC1D,SAAS,GAAG,EAAE,KAAK,EAAI,EAAE,IAAI,EAAI,kCAAkC,EAAE;AAC9D,KAAI,EAAK,EAAE,IAAI,EAAI,kCAAkC,EAAE;AACvD,IAAG,EAAM,EAAE,IAAI,EAAI,kCAAkC,EAAE;AACvD,OAAM,EAAG,EAAE,IAAI,EAAI,kCAAkC,EAAE,EAAE,CAAC;AACjE,OAAO,GAAK,EAAE,KAAK,EAAI,EAAE,IAAI,EAAG,UAAU,EAAE;AACrC,KAAI,EAAK,EAAE,IAAI,EAAG,UAAU,EAAE;AAC9B,IAAG,EAAM,EAAE,IAAI,EAAG,MAAM,EAAE;AAC1B,OAAM,EAAG,EAAE,IAAI,EAAG,MAAM,EAAE,EAAE,CAAC;;AAEpC,SAAS,CAAC,MAAM,CAAC,GAAG,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3C,SAAS,CAAC,GAAG,CAAC,GAAG,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC;AACzC,SAAS,CAAC,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC;AAC3C,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC;;AAEzC,OAAO,CAAC,MAAM,CAAC,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;AACvC,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC;AACrC,OAAO,CAAC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;AACvC,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;;AAErC,SAAS,eAAe,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,EAAE;AAC5C,KAAI,EAAE,GAAC,IAAI,EACV,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA,GAAE,CAAC,CAAC,KAE5C,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA,GAAE,CAAC,CAAC;CAC7C;;AAED,SAAS,iBAAiB,CAAC,OAAO,EAAE,GAAG,EAAE;AACxC,QAAO,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;AAChC,KAAI,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,GAAC,CAAC,CAAC,CAAC;AAC/C,KAAI,IAAI,GAAG,AAAC,OAAO,CAAC,MAAM,GAAG,CAAC,GAAI,KAAK,GAAG,MAAM,CAAC;AACjD,KAAI,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAC,OAAO,CAAC,MAAM,GAAC,CAAC,CAAC,CAAC;AACjD,KAAI,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,IAAE,CAAC,CAAC,EAC1C,IAAI,GAAG,iBAAiB,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AACrC,QAAO,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;CAC5D;;AAED,SAAS,aAAa,CAAC,OAAO,EAAE;AAC/B,KAAI,OAAO,GAAG,CAAC,CAAC;AAChB,KAAI,GAAG,GAAG,EAAE,CAAC,AAAC,IAAI,GAAG,GAAG,EAAE,CAAC;AAC3B,IAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAI,CAAC,AAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAI,CAAC;AAC/B,IAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAK,CAAC,AAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAK,CAAC;AAChC,QAAO,GAAG,EAAI,CAAC,AAAE,OAAO,GAAG,GAAK,CAAC;;AAEjC,MAAK,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAChC,GAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACf,IAAE,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;AACvB,OAAK,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,CAAC,EAAE,CAAC,EAAE,EAAE;AACnB,OAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACf,OAAI,OAAO,EAAE;AACZ,WAAO,IAAI,CAAC,CAAC;AACb,mBAAe,CAAC,GAAG,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IAC/B,MAAM;AACN,WAAO,IAAI,CAAC,CAAC;AACb,mBAAe,CAAC,GAAG,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IAC/B;AACD,UAAO,GAAG,CAAC,OAAO,CAAC;GACnB;EACD;AACD,IAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA,GAAE,CAAC,CAAC;AAC7B,IAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA,GAAE,CAAC,CAAC;;AAE7B,QAAO,EAAE,QAAQ,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAC,CAAC;CACxC;;AAED,SAAS,aAAa,CAAC,QAAQ,EAAE,SAAS,EAAE;AAC3C,KAAI,OAAO,GAAC,CAAC,CAAC;AACd,KAAI,CAAC,GAAC,CAAC,CAAC;AACR,KAAI,GAAG,GAAG,EAAE,CAAC,AAAC,IAAI,GAAG,GAAG,EAAE,CAAC;AAC3B,KAAI,GAAG,GAAC,CAAC,CAAC;AACV,KAAI,EAAE,GAAC,CAAC,CAAC;AACT,KAAI,SAAS,GAAG,EAAE,CAAC;AACnB,QAAO,GAAG,EAAE,CAAC;;AAEb,IAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAI,CAAC,AAAE,GAAG,CAAC,CAAC,CAAC,GAAG,EAAI,CAAC;AAC/B,IAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAK,CAAC,AAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAK,CAAC;;AAEhC,QAAO,OAAO,CAAC,MAAM,GAAG,SAAS,EAAE;AACjC,MAAI,OAAO,EAAE;AACb,MAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA,GAAI,CAAC,CAAC;AAC1B,OAAI,SAAS,GAAG,GAAG,EAAE;AACtB,MAAE,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;AAChB,OAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;IACX,MACF,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;GACb,MAAM;AACP,MAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA,GAAI,CAAC,CAAC;AAC1B,OAAI,QAAQ,GAAG,GAAG,EAAE;AACrB,MAAE,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;AAChB,OAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;IACX,MACF,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;GACb;;AAEF,SAAO,GAAG,CAAC,OAAO,CAAC;AAClB,MAAI,GAAG,GAAG,CAAC,EACX,GAAG,EAAE,CAAC,KACD;AACL,UAAO,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC;AACtB,MAAG,GAAG,CAAC,CAAC;AACR,KAAE,GAAG,CAAC,CAAC;GACN;EACF;AACD,QAAO,OAAO,CAAC;CACf;;AAGD,MAAM,CAAC,OAAO,GAAG;AAChB,OAAM,EAAE,aAAa;AACrB,OAAM,EAAE,aAAa;CACrB,CAAA","file":"bin/geohash.js","sourcesContent":["// geohash.js\n// Geohash library for Javascript\n// (c) 2008 David Troy\n// Distributed under the MIT License\n\nBITS = [16, 8, 4, 2, 1];\n\nBASE32 = \t\t\t\t\t\t\t\t\t\t\t   \"0123456789bcdefghjkmnpqrstuvwxyz\";\nNEIGHBORS = { right  : { even :  \"bc01fg45238967deuvhjyznpkmstqrwx\" },\n\t\t\t\t\t\t\tleft   : { even :  \"238967debc01fg45kmstqrwxuvhjyznp\" },\n\t\t\t\t\t\t\ttop    : { even :  \"p0r21436x8zb9dcf5h7kjnmqesgutwvy\" },\n\t\t\t\t\t\t\tbottom : { even :  \"14365h7k9dcfesgujnmqp0r2twvyx8zb\" } };\nBORDERS   = { right  : { even : \"bcfguvyz\" },\n\t\t\t\t\t\t\tleft   : { even : \"0145hjnp\" },\n\t\t\t\t\t\t\ttop    : { even : \"prxz\" },\n\t\t\t\t\t\t\tbottom : { even : \"028b\" } };\n\nNEIGHBORS.bottom.odd = NEIGHBORS.left.even;\nNEIGHBORS.top.odd = NEIGHBORS.right.even;\nNEIGHBORS.left.odd = NEIGHBORS.bottom.even;\nNEIGHBORS.right.odd = NEIGHBORS.top.even;\n\nBORDERS.bottom.odd = BORDERS.left.even;\nBORDERS.top.odd = BORDERS.right.even;\nBORDERS.left.odd = BORDERS.bottom.even;\nBORDERS.right.odd = BORDERS.top.even;\n\nfunction refine_interval(interval, cd, mask) {\n\tif (cd&mask)\n\t\tinterval[0] = (interval[0] + interval[1])/2;\n  else\n\t\tinterval[1] = (interval[0] + interval[1])/2;\n}\n\nfunction calculateAdjacent(srcHash, dir) {\n\tsrcHash = srcHash.toLowerCase();\n\tvar lastChr = srcHash.charAt(srcHash.length-1);\n\tvar type = (srcHash.length % 2) ? 'odd' : 'even';\n\tvar base = srcHash.substring(0,srcHash.length-1);\n\tif (BORDERS[dir][type].indexOf(lastChr)!=-1)\n\t\tbase = calculateAdjacent(base, dir);\n\treturn base + BASE32[NEIGHBORS[dir][type].indexOf(lastChr)];\n}\n\nfunction decodeGeoHash(geohash) {\n\tvar is_even = 1;\n\tvar lat = []; var lon = [];\n\tlat[0] = -90.0;  lat[1] = 90.0;\n\tlon[0] = -180.0; lon[1] = 180.0;\n\tlat_err = 90.0;  lon_err = 180.0;\n\t\n\tfor (i=0; i<geohash.length; i++) {\n\t\tc = geohash[i];\n\t\tcd = BASE32.indexOf(c);\n\t\tfor (j=0; j<5; j++) {\n\t\t\tmask = BITS[j];\n\t\t\tif (is_even) {\n\t\t\t\tlon_err /= 2;\n\t\t\t\trefine_interval(lon, cd, mask);\n\t\t\t} else {\n\t\t\t\tlat_err /= 2;\n\t\t\t\trefine_interval(lat, cd, mask);\n\t\t\t}\n\t\t\tis_even = !is_even;\n\t\t}\n\t}\n\tlat[2] = (lat[0] + lat[1])/2;\n\tlon[2] = (lon[0] + lon[1])/2;\n\n\treturn { latitude: lat, longitude: lon};\n}\n\nfunction encodeGeoHash(latitude, longitude) {\n\tvar is_even=1;\n\tvar i=0;\n\tvar lat = []; var lon = [];\n\tvar bit=0;\n\tvar ch=0;\n\tvar precision = 12;\n\tgeohash = \"\";\n\n\tlat[0] = -90.0;  lat[1] = 90.0;\n\tlon[0] = -180.0; lon[1] = 180.0;\n\t\n\twhile (geohash.length < precision) {\n\t  if (is_even) {\n\t\t\tmid = (lon[0] + lon[1]) / 2;\n\t    if (longitude > mid) {\n\t\t\t\tch |= BITS[bit];\n\t\t\t\tlon[0] = mid;\n\t    } else\n\t\t\t\tlon[1] = mid;\n\t  } else {\n\t\t\tmid = (lat[0] + lat[1]) / 2;\n\t    if (latitude > mid) {\n\t\t\t\tch |= BITS[bit];\n\t\t\t\tlat[0] = mid;\n\t    } else\n\t\t\t\tlat[1] = mid;\n\t  }\n\n\t\tis_even = !is_even;\n\t  if (bit < 4)\n\t\t\tbit++;\n\t  else {\n\t\t\tgeohash += BASE32[ch];\n\t\t\tbit = 0;\n\t\t\tch = 0;\n\t  }\n\t}\n\treturn geohash;\n}\n\n\nmodule.exports = {\n\tencode: encodeGeohash,\n\tdecode: decodeGeohash\n}"],"sourceRoot":"/source/"}